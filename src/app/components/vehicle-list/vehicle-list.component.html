<mat-card class="vehicle-card">
  <mat-card-content>
    <h2>Vehicle List</h2>
    <div class="table-container">
      <table mat-table [dataSource]="vehicles" class="mat-elevation-z8">
        <ng-container matColumnDef="vehicleID">
          <th mat-header-cell *matHeaderCellDef> Vehicle ID </th>
          <td mat-cell *matCellDef="let vehicle"> {{vehicle.vehicleid}} </td>
        </ng-container>

        <ng-container matColumnDef="vehicleNumber">
          <th mat-header-cell *matHeaderCellDef> Vehicle Number </th>
          <td mat-cell *matCellDef="let vehicle"> {{vehicle.vehiclenumber}} </td>
        </ng-container>

        <ng-container matColumnDef="vehicleType">
          <th mat-header-cell *matHeaderCellDef> Vehicle Type </th>
          <td mat-cell *matCellDef="let vehicle"> {{vehicle.vehicletype}} </td>
        </ng-container>

        <ng-container matColumnDef="lastDirection">
          <th mat-header-cell *matHeaderCellDef> Last Direction </th>
          <td mat-cell *matCellDef="let vehicle"> {{vehicle.lastRouteHistory?.vehicledirection || 'N/A'}} </td>
        </ng-container>

        <ng-container matColumnDef="lastStatus">
          <th mat-header-cell *matHeaderCellDef> Last Status </th>
          <td mat-cell *matCellDef="let vehicle"> {{vehicle.lastRouteHistory?.status || 'N/A'}} </td>
        </ng-container>

        <ng-container matColumnDef="lastAddress">
          <th mat-header-cell *matHeaderCellDef> Last Address </th>
          <td mat-cell *matCellDef="let vehicle"> {{vehicle.lastRouteHistory?.address || 'N/A'}} </td>
        </ng-container>

        <ng-container matColumnDef="lastLatitude">
          <th mat-header-cell *matHeaderCellDef> Last Latitude </th>
          <td mat-cell *matCellDef="let vehicle"> {{vehicle.lastRouteHistory?.latitude || 'N/A'}} </td>
        </ng-container>

        <ng-container matColumnDef="lastLongitude">
          <th mat-header-cell *matHeaderCellDef> Last Longitude </th>
          <td mat-cell *matCellDef="let vehicle"> {{vehicle.lastRouteHistory?.longitude || 'N/A'}} </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> Actions </th>
          <td mat-cell *matCellDef="let vehicle">
            <div class="action-buttons">
              <button mat-button (click)="openVehicleDetails(vehicle.vehicleid)">View More</button>
              <button mat-button (click)="openUpdateVehiclePage(vehicle.vehicleid)">Update</button>
              <button mat-button (click)="getRoutes(vehicle.vehicleid)">View Routes</button>
              <button mat-button (click)="deleteVehicle(vehicle.vehicleid)">Delete</button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  </mat-card-content>
</mat-card>

<app-geofence></app-geofence>
